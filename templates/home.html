{% extends 'base.html' %}
{% load i18n %}
{% load tagging_tags %}
{% block content %}
    <div ng-controller="PublicationController as ctrl">
        <div ng-cloak ng-show="!ctrl.viewProfile" class="col-md-2">
            <div class="panel panel-success">
                <div class="panel-heading">
                    <h3 class="panel-title">{% trans 'Categories' %}</h3>
                </div>
                <div class="list-group">
                    {% for category in categories %}
                        <a href="#{{ category.name }}" ng-click="ctrl.setFilter({{ category.id }})"
                           class="list-group-item">{% trans category.name %}</a>
                    {% endfor %}
                </div>
            </div>
        </div>

        <div>
            {% verbatim %}
            {{ ctrl.userProfile.profile.home }}
            {{ ctrl.userProfile.profile.email }}
            {{ ctrl.userProfile.profile.gender }}
            {{ ctrl.userProfile.profile.location }}
            {{ ctrl.userProfile.profile.photo }}
            {{ ctrl.userProfile.profile.username }}
            {% endverbatim %}
        </div>


        <div class="col-md-10 pull-right" ng-repeat="publication in ctrl.publications track by $index">
            {% verbatim %}
            <div class="panel panel-success">

                <div class="panel-heading">
                    <h3 class="panel-title"><a href="#$">{{ publication.header }}</a></h3>
                </div>

                <div class="panel-body">
                    <div class="well">
                        {{ publication.description }}
                    </div>

                    <ul class="breadcrumb">
                        <li>{{publication.category }}</li>
                        <li><span class="label label-success"><a href="#"
                                                                 ng-click="ctrl.setFilter(0,publication.username)">{{
                            publication.username }}</a></span></li>
                        <li class="active">{{publication.created_at | date:'medium'}}</li>
                        <li><span class="badge"><span
                                ng-show="publication.rate > 0">+</span>{{ publication.rate }}</span></li>
                    </ul>
                </div>
            </div>
            <ul class="tags ">
                <li ng-repeat="tag in publication.tag"><a href="#">{{ tag }}</a></li>
            </ul>

            {% endverbatim %}
        </div>
    </div>

{% endblock %}

{% get_available_languages as LANGUAGES %}
<form action="{% url 'set_language' %}" method="post">
    {% csrf_token %}
    <input name="next" type="hidden" value="{{ redirect_to }}"/>
    <select name="language">
        {% get_language_info_list for LANGUAGES as languages %}
        {% get_current_language as LANGUAGE_CODE %}
        {% for language in languages %}
            <option value="{{ language.code }}"{% if language.code == LANGUAGE_CODE %} selected="selected"{% endif %}>
                {{ language.name_local }} ({{ language.code }})
            </option>
        {% endfor %}
    </select>
    <input type="submit" value="Go"/>
</form>

